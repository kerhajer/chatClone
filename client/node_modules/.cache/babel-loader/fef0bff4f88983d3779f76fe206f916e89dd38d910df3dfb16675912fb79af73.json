{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst createConfig = () => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    return {\n      headers: {\n        token\n      }\n    };\n  } else {\n    return {};\n  }\n};\nexport const chatbot = createAsyncThunk('chat/chatbot', async ({\n  text,\n  currentModel\n}, {\n  rejectWithValue\n}) => {\n  const config = createConfig();\n  try {\n    const response = await axios.post('http://localhost:5000/api/chat/chatbot', {\n      text,\n      currentModel\n    }, config);\n    const generatedContent = response.data.generatedContent;\n    const newMessage = {\n      role: 'user',\n      content: text,\n      model: currentModel\n    };\n    const botMessage = {\n      role: 'chatbot',\n      content: generatedContent\n    };\n    return {\n      newMessage,\n      botMessage\n    };\n  } catch (error) {\n    console.error('Error fetching chatbot data:', error);\n\n    // Handle the error by rejecting the promise with a custom payload\n    return rejectWithValue({\n      message: error.message,\n      name: error.name,\n      code: error.code\n    });\n  }\n});\nexport const modelschat = createAsyncThunk('chat/modelschat', async (_, {\n  rejectWithValue\n}) => {\n  const config = createConfig();\n  try {\n    const {\n      data\n    } = await axios.get('http://localhost:5000/api/chat/models', config);\n    return data;\n  } catch (error) {\n    // Log the error message\n    console.error('Error', error);\n    return rejectWithValue(error.response.data.message);\n  }\n});\nexport const historychat = createAsyncThunk('chat/historychat', async (_, {\n  rejectWithValue\n}) => {\n  const config = createConfig();\n  try {\n    const {\n      data\n    } = await axios.get('http://localhost:5000/api/chat/chatbot/history', config);\n    return data;\n  } catch (error) {\n    // Log the error message\n    console.error('Error', error);\n    return rejectWithValue(error.response.data.message);\n  }\n});\nconst initialState = {\n  isLoading: false,\n  registerErrors: null,\n  msg: null,\n  chat: JSON.parse(localStorage.getItem('chat')) || [],\n  messageuser: {},\n  models: [],\n  history: []\n};\nconst chatSlice = createSlice({\n  name: 'chat',\n  initialState,\n  reducers: {\n    resetChatState: state => {\n      state.isLoading = false;\n      state.registerErrors = null;\n      state.chat = [];\n    },\n    addMessage: (state, action) => {\n      state.chat.push(action.payload);\n    },\n    addChatbotMessage: (state, action) => {\n      state.chat.push(action.payload.botMessage);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(chatbot.pending, state => {\n      state.isLoading = true;\n    }).addCase(chatbot.fulfilled, (state, {\n      type,\n      payload\n    }) => {\n      state.isLoading = false;\n      state.messageuser = payload.newMessage;\n      state.chat.push(payload.botMessage);\n      localStorage.setItem('chat', JSON.stringify(state.chat));\n    }).addCase(modelschat.pending, state => {\n      state.isLoading = true;\n    }).addCase(modelschat.fulfilled, (state, {\n      type,\n      payload\n    }) => {\n      state.isLoading = false;\n      state.models = payload;\n      localStorage.setItem('models', JSON.stringify(state.models));\n    }).addCase(historychat.pending, state => {\n      state.isLoading = true;\n    }).addCase(historychat.fulfilled, (state, {\n      type,\n      payload\n    }) => {\n      state.isLoading = false;\n      state.models = payload;\n      localStorage.setItem('history', JSON.stringify(state.history));\n    });\n  }\n});\nexport const {\n  resetChatState,\n  addChatbotMessage,\n  addMessage\n} = chatSlice.actions;\nexport default chatSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","createConfig","token","localStorage","getItem","headers","chatbot","text","currentModel","rejectWithValue","config","response","post","generatedContent","data","newMessage","role","content","model","botMessage","error","console","message","name","code","modelschat","_","get","historychat","initialState","isLoading","registerErrors","msg","chat","JSON","parse","messageuser","models","history","chatSlice","reducers","resetChatState","state","addMessage","action","push","payload","addChatbotMessage","extraReducers","builder","addCase","pending","fulfilled","type","setItem","stringify","actions","reducer"],"sources":["C:/Users/Hajer/Desktop/chatgptclone/client/src/Redux/ChatSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nconst createConfig = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      return {\r\n        headers: {\r\n          token\r\n        }\r\n      };\r\n    } else {\r\n      return {};\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  \r\n  export const chatbot = createAsyncThunk(\r\n    'chat/chatbot',\r\n    async ({ text, currentModel }, { rejectWithValue }) => {\r\n      const config = createConfig();\r\n  \r\n      try {\r\n        const response = await axios.post('http://localhost:5000/api/chat/chatbot', { text, currentModel }, config);\r\n        const generatedContent = response.data.generatedContent;\r\n  \r\n        const newMessage = { role: 'user', content: text, model: currentModel };\r\n        const botMessage = { role: 'chatbot', content: generatedContent };\r\n  \r\n        return { newMessage, botMessage };\r\n      } catch (error) {\r\n        console.error('Error fetching chatbot data:', error);\r\n  \r\n        // Handle the error by rejecting the promise with a custom payload\r\n        return rejectWithValue({ message: error.message, name: error.name, code: error.code });\r\n\r\n      }\r\n    }\r\n  );\r\n  \r\n \r\n\r\n \r\n  export const modelschat= createAsyncThunk('chat/modelschat', async (_, { rejectWithValue }) => {\r\n    const config = createConfig();\r\n  \r\n  \r\n    try {\r\n  \r\n  \r\n      const { data } = await axios.get('http://localhost:5000/api/chat/models', config);\r\n  \r\n\r\n    return data ;\r\n    } catch (error) {\r\n      // Log the error message\r\n      console.error('Error', error);\r\n  \r\n      return rejectWithValue(error.response.data.message);\r\n    }\r\n  });\r\n\r\n  export const historychat= createAsyncThunk('chat/historychat', async (_, { rejectWithValue }) => {\r\n    const config = createConfig();\r\n  \r\n  \r\n    try {\r\n  \r\n  \r\n      const { data } = await axios.get('http://localhost:5000/api/chat/chatbot/history', config);\r\n  \r\n\r\n    return data ;\r\n    } catch (error) {\r\n      // Log the error message\r\n      console.error('Error', error);\r\n  \r\n      return rejectWithValue(error.response.data.message);\r\n    }\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst initialState = {\r\n\r\n  isLoading: false,\r\n  registerErrors: null,\r\n  msg: null,\r\n  chat: JSON.parse(localStorage.getItem('chat')) || [],\r\n  messageuser:{ },\r\n  models:[],\r\n  history:[]\r\n\r\n};\r\n\r\nconst chatSlice = createSlice({\r\n  name: 'chat',\r\n  initialState,\r\n  reducers: {\r\n  \r\n    resetChatState: (state) => {\r\n        state.isLoading = false;\r\n        state.registerErrors = null;\r\n        state.chat = [];\r\n      },\r\n\r\n      \r\n        addMessage: (state, action) => {\r\n          state.chat.push(action.payload);\r\n        },\r\n        addChatbotMessage: (state, action) => {\r\n          state.chat.push(action.payload.botMessage );\r\n        },\r\n      },\r\n  \r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(chatbot.pending, (state) => {\r\n        state.isLoading = true;\r\n\r\n\r\n\r\n      })\r\n      .addCase(chatbot.fulfilled, (state, { type, payload }) => {\r\n        state.isLoading = false;\r\n        state.messageuser=payload.newMessage\r\n\r\n        state.chat.push( payload.botMessage );\r\n\r\n        localStorage.setItem('chat', JSON.stringify(state.chat));\r\n\r\n       \r\n      })\r\n  \r\n     \r\n      .addCase(modelschat.pending, (state) => {\r\n        state.isLoading = true;\r\n\r\n\r\n\r\n      })\r\n      .addCase(modelschat.fulfilled, (state, { type, payload }) => {\r\n        state.isLoading = false;\r\n\r\n        state.models= payload\r\n        localStorage.setItem('models', JSON.stringify(state.models));\r\n\r\n\r\n       \r\n      })\r\n  \r\n      .addCase(historychat.pending, (state) => {\r\n        state.isLoading = true;\r\n\r\n\r\n\r\n      })\r\n      .addCase(historychat.fulfilled, (state, { type, payload }) => {\r\n        state.isLoading = false;\r\n\r\n        state.models= payload\r\n        localStorage.setItem('history', JSON.stringify(state.history));\r\n\r\n\r\n       \r\n      })\r\n\r\n\r\n\r\n      \r\n  }\r\n\r\n});\r\n\r\nexport const { resetChatState,addChatbotMessage,addMessage } = chatSlice.actions;\r\n\r\nexport default chatSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}