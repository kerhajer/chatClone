{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst createConfig = () => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    return {\n      headers: {\n        token\n      }\n    };\n  } else {\n    return {};\n  }\n};\nexport const chatbot = createAsyncThunk('chat/chatbot', async ({\n  text\n}, {\n  rejectWithValue\n}) => {\n  const config = createConfig();\n  try {\n    const {\n      data\n    } = await axios.post('http://localhost:5000/api/chat/chatbot', {\n      text\n    }, config);\n    return data;\n  } catch (error) {\n    console.error('Error adding facture:', error);\n    return rejectWithValue(error.response.data.message);\n  }\n});\nconst initialState = {\n  isLoading: false,\n  registerErrors: null,\n  msg: null,\n  chat: localStorage.getItem('ytc-chat') ? JSON.parse(localStorage.getItem('ytc-chat')) : []\n};\nconst chatSlice = createSlice({\n  name: 'chat',\n  initialState,\n  reducers: {\n    resetChatState: state => {\n      state.isLoading = false;\n      state.registerErrors = null;\n      state.chat = [];\n    },\n    addMessageToChat: (state, action) => {\n      state.chat.push(action.payload);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(chatbot.pending, state => {\n      state.isLoading = true;\n    }).addCase(chatbot.fulfilled, (state, {\n      payload\n    }) => {\n      state.isLoading = false;\n      // Assuming payload is an array of messages, adjust accordingly\n      state.chat = state.chat.concat(payload);\n    }).addCase(chatbot.rejected, state => {\n      // Handle rejected case if needed\n    });\n  }\n});\nexport const {\n  resetChatState,\n  addMessageToChat\n} = chatSlice.actions;\nexport default chatSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","createConfig","token","localStorage","getItem","headers","chatbot","text","rejectWithValue","config","data","post","error","console","response","message","initialState","isLoading","registerErrors","msg","chat","JSON","parse","chatSlice","name","reducers","resetChatState","state","addMessageToChat","action","push","payload","extraReducers","builder","addCase","pending","fulfilled","concat","rejected","actions","reducer"],"sources":["C:/Users/Hajer/Desktop/chatgptclone/client/src/Redux/ChatSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nconst createConfig = () => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    return {\r\n      headers: {\r\n        token\r\n      }\r\n    };\r\n  } else {\r\n    return {};\r\n  }\r\n};\r\n\r\nexport const chatbot = createAsyncThunk('chat/chatbot', async ({ text }, { rejectWithValue }) => {\r\n  const config = createConfig();\r\n\r\n  try {\r\n    const { data } = await axios.post('http://localhost:5000/api/chat/chatbot', { text }, config);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error adding facture:', error);\r\n    return rejectWithValue(error.response.data.message);\r\n  }\r\n});\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  registerErrors: null,\r\n  msg: null,\r\n  chat: localStorage.getItem('ytc-chat') ? JSON.parse(localStorage.getItem('ytc-chat')) : [],\r\n};\r\n\r\nconst chatSlice = createSlice({\r\n  name: 'chat',\r\n  initialState,\r\n  reducers: {\r\n    resetChatState: (state) => {\r\n      state.isLoading = false;\r\n      state.registerErrors = null;\r\n      state.chat = [];\r\n    },\r\n    addMessageToChat: (state, action) => {\r\n      state.chat.push(action.payload);\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(chatbot.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(chatbot.fulfilled, (state, { payload }) => {\r\n        state.isLoading = false;\r\n        // Assuming payload is an array of messages, adjust accordingly\r\n        state.chat = state.chat.concat(payload);\r\n      })\r\n      .addCase(chatbot.rejected, (state) => {\r\n        // Handle rejected case if needed\r\n      });\r\n  },\r\n});\r\n\r\nexport const { resetChatState, addMessageToChat } = chatSlice.actions;\r\n\r\nexport default chatSlice.reducer;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,gBAAgB,QAAQ,kBAAkB;AACnD,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGA,CAAA,KAAM;EACzB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACT,OAAO;MACLG,OAAO,EAAE;QACPH;MACF;IACF,CAAC;EACH,CAAC,MAAM;IACL,OAAO,CAAC,CAAC;EACX;AACF,CAAC;AAED,OAAO,MAAMI,OAAO,GAAGP,gBAAgB,CAAC,cAAc,EAAE,OAAO;EAAEQ;AAAK,CAAC,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC/F,MAAMC,MAAM,GAAGR,YAAY,CAAC,CAAC;EAE7B,IAAI;IACF,MAAM;MAAES;IAAK,CAAC,GAAG,MAAMV,KAAK,CAACW,IAAI,CAAC,wCAAwC,EAAE;MAAEJ;IAAK,CAAC,EAAEE,MAAM,CAAC;IAC7F,OAAOC,IAAI;EACb,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7C,OAAOJ,eAAe,CAACI,KAAK,CAACE,QAAQ,CAACJ,IAAI,CAACK,OAAO,CAAC;EACrD;AACF,CAAC,CAAC;AAEF,MAAMC,YAAY,GAAG;EACnBC,SAAS,EAAE,KAAK;EAChBC,cAAc,EAAE,IAAI;EACpBC,GAAG,EAAE,IAAI;EACTC,IAAI,EAAEjB,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,GAAGiB,IAAI,CAACC,KAAK,CAACnB,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,GAAG;AAC1F,CAAC;AAED,MAAMmB,SAAS,GAAGzB,WAAW,CAAC;EAC5B0B,IAAI,EAAE,MAAM;EACZR,YAAY;EACZS,QAAQ,EAAE;IACRC,cAAc,EAAGC,KAAK,IAAK;MACzBA,KAAK,CAACV,SAAS,GAAG,KAAK;MACvBU,KAAK,CAACT,cAAc,GAAG,IAAI;MAC3BS,KAAK,CAACP,IAAI,GAAG,EAAE;IACjB,CAAC;IACDQ,gBAAgB,EAAEA,CAACD,KAAK,EAAEE,MAAM,KAAK;MACnCF,KAAK,CAACP,IAAI,CAACU,IAAI,CAACD,MAAM,CAACE,OAAO,CAAC;IACjC;EACF,CAAC;EACDC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAAC5B,OAAO,CAAC6B,OAAO,EAAGR,KAAK,IAAK;MACnCA,KAAK,CAACV,SAAS,GAAG,IAAI;IACxB,CAAC,CAAC,CACDiB,OAAO,CAAC5B,OAAO,CAAC8B,SAAS,EAAE,CAACT,KAAK,EAAE;MAAEI;IAAQ,CAAC,KAAK;MAClDJ,KAAK,CAACV,SAAS,GAAG,KAAK;MACvB;MACAU,KAAK,CAACP,IAAI,GAAGO,KAAK,CAACP,IAAI,CAACiB,MAAM,CAACN,OAAO,CAAC;IACzC,CAAC,CAAC,CACDG,OAAO,CAAC5B,OAAO,CAACgC,QAAQ,EAAGX,KAAK,IAAK;MACpC;IAAA,CACD,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAED,cAAc;EAAEE;AAAiB,CAAC,GAAGL,SAAS,CAACgB,OAAO;AAErE,eAAehB,SAAS,CAACiB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}